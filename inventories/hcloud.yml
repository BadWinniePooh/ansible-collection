---
# Dynamic inventory plugin for Hetzner Cloud
#
# Requires the HCLOUD_TOKEN environment variable to be set.
#
# Local usage:
#   export HCLOUD_TOKEN=<your-hetzner-api-token>
#
# Docker usage: add to your docker run command:
#   -e HCLOUD_TOKEN=<your-hetzner-api-token>
#
# The plugin queries the Hetzner Cloud API at runtime, so no IP address or
# server name needs to be maintained in a static file.
plugin: hetzner.hcloud.hcloud

filters:
  label_selector: "platform=linux"
groups:
  # Every server that passes the label_selector filter above belongs to hcloud_type,
  # so group_vars/hcloud_type/vars.yml (admin_user, ssh key, default type) is loaded.
  # Using `true` avoids any ambiguity about how the plugin exposes the labels dict.
  hcloud_type: true
  # Re-create the mordor group used by configure-linux.yml playbooks.
  # The label_selector filter already guarantees platform=linux, so this is always true.
  mordor: true

compose:
  # Use root for the initial connection (same as the static hosts.ini entry).
  # After setup-users.yml runs, ansible_user can be switched to the ansible user.
  ansible_user: "'root'"
